<view class="ai-chat-container"><view class="custom-navbar"><view class="navbar-content"><view class="navbar-left" bindtap="{{b}}"><image class="back-icon" src="{{a}}" mode="aspectFit"></image></view><view class="navbar-center"><text class="navbar-title">AI智能助手</text></view><view class="navbar-right"><view class="{{['ai-status', d]}}"><text class="status-text">{{c}}</text></view></view></view></view><scroll-view class="chat-content" scroll-y="true" scroll-top="{{h}}" scroll-with-animation="true"><view class="message-list"><view wx:for="{{e}}" wx:for-item="message" wx:key="g" class="{{['message-item', message.h]}}"><view class="message-avatar"><image wx:if="{{message.a}}" class="avatar-img" src="{{message.b}}" mode="aspectFill"></image><image wx:else class="avatar-img ai-avatar" src="{{message.c}}" mode="aspectFill"></image></view><view class="message-content"><view class="{{['message-bubble', message.e]}}"><text class="message-text">{{message.d}}</text></view><text class="message-time">{{message.f}}</text></view></view><view wx:if="{{f}}" class="message-item ai"><view class="message-avatar"><image class="avatar-img ai-avatar" src="{{g}}" mode="aspectFill"></image></view><view class="message-content"><view class="message-bubble ai typing"><view class="typing-indicator"><view class="typing-dot"></view><view class="typing-dot"></view><view class="typing-dot"></view></view></view></view></view></view></scroll-view><view wx:if="{{i}}" class="login-modal" bindtap="{{n}}"><view class="modal-content" catchtap="{{m}}"><view class="modal-header"><text class="modal-title">需要登录</text><view class="close-btn" bindtap="{{j}}"><text class="close-icon">×</text></view></view><view class="modal-body"><text class="modal-text">使用AI智能助手功能需要先登录账号</text><text class="modal-subtitle">登录后即可享受完整的AI对话体验</text></view><view class="modal-footer"><button class="cancel-btn" bindtap="{{k}}">稍后再说</button><button class="login-btn" bindtap="{{l}}">立即登录</button></view></view></view><view class="input-area"><view class="input-container"><input class="message-input" placeholder="请输入您的问题..." disabled="{{o}}" bindconfirm="{{p}}" confirm-type="send" value="{{q}}" bindinput="{{r}}"/><button class="{{['send-btn', s && 'disabled']}}" bindtap="{{t}}" disabled="{{v}}"><text class="send-text">发送</text></button></view></view></view>